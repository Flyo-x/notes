<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>bootstrap | 学习笔记</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/notes/avatar.png">
    <meta name="description" content="学习不同知识，记录各种点滴">
    
    <link rel="preload" href="/notes/assets/css/0.styles.8fcc0579.css" as="style"><link rel="preload" href="/notes/assets/js/app.08cdebc2.js" as="script"><link rel="preload" href="/notes/assets/js/2.a5080860.js" as="script"><link rel="preload" href="/notes/assets/js/8.e6bb093c.js" as="script"><link rel="prefetch" href="/notes/assets/js/10.be75ce56.js"><link rel="prefetch" href="/notes/assets/js/11.e49ae3ed.js"><link rel="prefetch" href="/notes/assets/js/12.ca1175ea.js"><link rel="prefetch" href="/notes/assets/js/13.876e6307.js"><link rel="prefetch" href="/notes/assets/js/14.67fd5388.js"><link rel="prefetch" href="/notes/assets/js/15.52f8ad77.js"><link rel="prefetch" href="/notes/assets/js/16.effb6c82.js"><link rel="prefetch" href="/notes/assets/js/17.e4babfeb.js"><link rel="prefetch" href="/notes/assets/js/18.58c27e7e.js"><link rel="prefetch" href="/notes/assets/js/19.e3ef1d3b.js"><link rel="prefetch" href="/notes/assets/js/20.0c775263.js"><link rel="prefetch" href="/notes/assets/js/21.5e085ca6.js"><link rel="prefetch" href="/notes/assets/js/22.38e21830.js"><link rel="prefetch" href="/notes/assets/js/23.cd4fc012.js"><link rel="prefetch" href="/notes/assets/js/24.59227be1.js"><link rel="prefetch" href="/notes/assets/js/25.39af0132.js"><link rel="prefetch" href="/notes/assets/js/26.b859f5e3.js"><link rel="prefetch" href="/notes/assets/js/27.84fa36f0.js"><link rel="prefetch" href="/notes/assets/js/28.7de6c187.js"><link rel="prefetch" href="/notes/assets/js/29.58ef44bf.js"><link rel="prefetch" href="/notes/assets/js/3.04442e1b.js"><link rel="prefetch" href="/notes/assets/js/30.9b0ecc95.js"><link rel="prefetch" href="/notes/assets/js/31.752cbb99.js"><link rel="prefetch" href="/notes/assets/js/32.5be6e307.js"><link rel="prefetch" href="/notes/assets/js/33.577e792f.js"><link rel="prefetch" href="/notes/assets/js/4.ed1d74a5.js"><link rel="prefetch" href="/notes/assets/js/5.60285ec9.js"><link rel="prefetch" href="/notes/assets/js/6.815c5e87.js"><link rel="prefetch" href="/notes/assets/js/7.efd8b1b3.js"><link rel="prefetch" href="/notes/assets/js/9.7675b3e8.js">
    <link rel="stylesheet" href="/notes/assets/css/0.styles.8fcc0579.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/notes/" class="home-link router-link-active"><img src="/notes/avatar.png" alt="学习笔记" class="logo"> <span class="site-name can-hide">学习笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/notes/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="分类" class="dropdown-title"><span class="title">分类</span> <span class="arrow down"></span></button> <button type="button" aria-label="分类" class="mobile-dropdown-title"><span class="title">分类</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes/pages/menu/menu.html" class="nav-link">
  目录
</a></li><li class="dropdown-item"><!----> <a href="/notes/pages/games101/介绍.html" class="nav-link">
  Games101笔记
</a></li><li class="dropdown-item"><!----> <a href="/notes/pages/elementui/工具类说明.html" class="nav-link">
  elementui源码阅读
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/notes/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="分类" class="dropdown-title"><span class="title">分类</span> <span class="arrow down"></span></button> <button type="button" aria-label="分类" class="mobile-dropdown-title"><span class="title">分类</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes/pages/menu/menu.html" class="nav-link">
  目录
</a></li><li class="dropdown-item"><!----> <a href="/notes/pages/games101/介绍.html" class="nav-link">
  Games101笔记
</a></li><li class="dropdown-item"><!----> <a href="/notes/pages/elementui/工具类说明.html" class="nav-link">
  elementui源码阅读
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>element-ui</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/notes/pages/elementui/目录结构.html" class="sidebar-link">目录结构</a></li><li><a href="/notes/pages/elementui/命令说明.html" class="active sidebar-link">命令说明</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/pages/elementui/命令说明.html#bootstrap" class="sidebar-link">bootstrap</a></li><li class="sidebar-sub-header"><a href="/notes/pages/elementui/命令说明.html#build-file" class="sidebar-link">build:file</a></li><li class="sidebar-sub-header"><a href="/notes/pages/elementui/命令说明.html#build-theme" class="sidebar-link">build:theme</a></li><li class="sidebar-sub-header"><a href="/notes/pages/elementui/命令说明.html#build-utils" class="sidebar-link">build:utils</a></li><li class="sidebar-sub-header"><a href="/notes/pages/elementui/命令说明.html#build-umd" class="sidebar-link">build:umd</a></li><li class="sidebar-sub-header"><a href="/notes/pages/elementui/命令说明.html#clean" class="sidebar-link">clean</a></li><li class="sidebar-sub-header"><a href="/notes/pages/elementui/命令说明.html#deploy-build" class="sidebar-link">deploy:build</a></li><li class="sidebar-sub-header"><a href="/notes/pages/elementui/命令说明.html#deploy-extension" class="sidebar-link">deploy:extension</a></li><li class="sidebar-sub-header"><a href="/notes/pages/elementui/命令说明.html#dev-extension" class="sidebar-link">dev:extension</a></li><li class="sidebar-sub-header"><a href="/notes/pages/elementui/命令说明.html#dev" class="sidebar-link">dev</a></li><li class="sidebar-sub-header"><a href="/notes/pages/elementui/命令说明.html#dev-play" class="sidebar-link">dev:play</a></li><li class="sidebar-sub-header"><a href="/notes/pages/elementui/命令说明.html#dist" class="sidebar-link">dist</a></li></ul></li><li><a href="/notes/pages/elementui/工具类说明.html" class="sidebar-link">工具类说明</a></li><li><a href="/notes/pages/elementui/样式设计.html" class="sidebar-link">样式设计</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="bootstrap"><a href="#bootstrap" class="header-anchor">#</a> bootstrap</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string-property property">&quot;bootstrap&quot;</span><span class="token operator">:</span> <span class="token string">&quot;yarn || npm i&quot;</span>
</code></pre></div><p>yarn命令存在则使用yarn安装依赖，否则使用npm i安装依赖</p> <h2 id="build-file"><a href="#build-file" class="header-anchor">#</a> build:file</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string-property property">&quot;build:file&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node build/bin/iconInit.js &amp; node build/bin/build-entry.js &amp; node build/bin/i18n.js &amp; node build/bin/version.js&quot;</span>
</code></pre></div><p>这个命令里面的&amp;是并行运行，<a href="https://juejin.cn/post/6844903664994222093" target="_blank" rel="noopener noreferrer">npm script中&amp;&amp;和&amp;<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>这篇文章很好的说明了&amp;&amp;和&amp;的区别</p> <ol><li><p>node build/bin/iconInit.js
读取packages/theme-chalk/src/icon.scss，提取选择器名，保存到examples/icon.json</p></li> <li><p>node build/bin/build-entry.js
读取components.json，获取所有组件的路径，根据默认的模板，生成src/index.js文件。</p></li></ol> <blockquote><p>这里有几点值得学习的地方</p> <ol><li>通过components.json获取到所有的组件，自动生成各个组件的导出，方便按需引入</li> <li>导出中有一个install方法，如果想要完整导入，只需要使用Vue.use(导出elementUi给的别名)</li></ol></blockquote> <ol start="3"><li>node build/bin/i18n.js
读取page.json，获取所有页面语言翻译，根据默认的模板，生成页面。</li></ol> <blockquote><p>注意：国际化除了page.json，还有component.json，route.json，这些的执行脚本new-lang.js没有写到命令里，而是写在了makefile里面</p></blockquote> <ol start="4"><li>node build/bin/version.js
生成版本文件</li></ol> <h2 id="build-theme"><a href="#build-theme" class="header-anchor">#</a> build:theme</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">&quot;node build/bin/gen-cssfile &amp;&amp; gulp build --gulpfile packages/theme-chalk/gulpfile.js &amp;&amp; cp-cli packages/theme-chalk/lib lib/theme-chalk&quot;</span>
</code></pre></div><ol><li><p>node build/bin/gen-cssfile
生成index.scss，引入所有的组件样式</p></li> <li><p>gulp build --gulpfile packages/theme-chalk/gulpfile.js
把scss转成css并作一些处理，把fonts文件夹迁移到lib下</p></li> <li><p>cp-cli packages/theme-chalk/lib lib/theme-chalk
迁移文件夹</p></li></ol> <h2 id="build-utils"><a href="#build-utils" class="header-anchor">#</a> build:utils</h2> <div class="language-js extra-class"><pre class="language-js"><code>cross<span class="token operator">-</span>env <span class="token constant">BABEL_ENV</span><span class="token operator">=</span>utils babel src <span class="token operator">--</span>out<span class="token operator">-</span>dir lib <span class="token operator">--</span>ignore src<span class="token operator">/</span>index<span class="token punctuation">.</span>js
</code></pre></div><p>因为系统之间的差异，使用corss-env来抹平。设置babel的环境变量为utils，通过babel把src下的文件根据utils的配置进行转换，输出到lib目录下，忽略src/index.js的转换</p> <h2 id="build-umd"><a href="#build-umd" class="header-anchor">#</a> build:umd</h2> <div class="language-js extra-class"><pre class="language-js"><code>node build<span class="token operator">/</span>bin<span class="token operator">/</span>build<span class="token operator">-</span>locale<span class="token punctuation">.</span>js
</code></pre></div><p>生成适合amd和cjs使用的国际化</p> <h2 id="clean"><a href="#clean" class="header-anchor">#</a> clean</h2> <p>删除文件</p> <h2 id="deploy-build"><a href="#deploy-build" class="header-anchor">#</a> deploy:build</h2> <div class="language-js extra-class"><pre class="language-js"><code>npm run build<span class="token operator">:</span>file <span class="token operator">&amp;&amp;</span> cross<span class="token operator">-</span>env <span class="token constant">NODE_ENV</span><span class="token operator">=</span>production webpack <span class="token operator">--</span>config build<span class="token operator">/</span>webpack<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>js <span class="token operator">&amp;&amp;</span> echo element<span class="token punctuation">.</span>eleme<span class="token punctuation">.</span>io<span class="token operator">&gt;&gt;</span>examples<span class="token operator">/</span>element<span class="token operator">-</span>ui<span class="token operator">/</span><span class="token constant">CNAME</span>
</code></pre></div><ol><li><p>npm run build:file
这个看上面</p></li> <li><p>cross-env NODE_ENV=production webpack --config build/webpack.demo.js
设置node环境变量，根据webpack.demo.js的配置，入口文件是examples/entry.js，最终输出到examples/element-ui。打包输出的是文档说明的生产环境</p></li> <li><p>echo element.eleme.io&gt;&gt;examples/element-ui/CNAME
往examples/element-ui/CNAME输入element.eleme.io</p></li></ol> <h2 id="deploy-extension"><a href="#deploy-extension" class="header-anchor">#</a> deploy:extension</h2> <div class="language-js extra-class"><pre class="language-js"><code>cross<span class="token operator">-</span>env <span class="token constant">NODE_ENV</span><span class="token operator">=</span>production webpack <span class="token operator">--</span>config build<span class="token operator">/</span>webpack<span class="token punctuation">.</span>extension<span class="token punctuation">.</span>js
</code></pre></div><p>用于构建名为Element Theme Roller的chrome生产环境的插件</p> <h2 id="dev-extension"><a href="#dev-extension" class="header-anchor">#</a> dev:extension</h2> <div class="language-js extra-class"><pre class="language-js"><code>rimraf examples<span class="token operator">/</span>extension<span class="token operator">/</span>dist <span class="token operator">&amp;&amp;</span> cross<span class="token operator">-</span>env <span class="token constant">NODE_ENV</span><span class="token operator">=</span>development webpack <span class="token operator">--</span>watch <span class="token operator">--</span>config build<span class="token operator">/</span>webpack<span class="token punctuation">.</span>extension<span class="token punctuation">.</span>js
</code></pre></div><ol><li><p>rimraf examples/extension/dist
删除打包的目录</p></li> <li><p>cross-env NODE_ENV=development webpack --watch --config build/webpack.extension.js
用于构建名为Element Theme Roller的chrome测试环境的插件</p></li></ol> <h2 id="dev"><a href="#dev" class="header-anchor">#</a> dev</h2> <div class="language-js extra-class"><pre class="language-js"><code>npm run bootstrap <span class="token operator">&amp;&amp;</span> npm run build<span class="token operator">:</span>file <span class="token operator">&amp;&amp;</span> cross<span class="token operator">-</span>env <span class="token constant">NODE_ENV</span><span class="token operator">=</span>development webpack<span class="token operator">-</span>dev<span class="token operator">-</span>server <span class="token operator">--</span>config build<span class="token operator">/</span>webpack<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>js <span class="token operator">&amp;</span> node build<span class="token operator">/</span>bin<span class="token operator">/</span>template<span class="token punctuation">.</span>js
</code></pre></div><ol><li><p>cross-env NODE_ENV=development webpack-dev-server --config build/webpack.demo.js
启动文档官网的测试环境</p></li> <li><p>node build/bin/template.js
监听'examples/pages/template'下的模板文件</p></li></ol> <h2 id="dev-play"><a href="#dev-play" class="header-anchor">#</a> dev:play</h2> <div class="language-js extra-class"><pre class="language-js"><code>npm run build<span class="token operator">:</span>file <span class="token operator">&amp;&amp;</span> cross<span class="token operator">-</span>env <span class="token constant">NODE_ENV</span><span class="token operator">=</span>development <span class="token constant">PLAY_ENV</span><span class="token operator">=</span><span class="token boolean">true</span> webpack<span class="token operator">-</span>dev<span class="token operator">-</span>server <span class="token operator">--</span>config build<span class="token operator">/</span>webpack<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>js
</code></pre></div><ol><li>cross-env NODE_ENV=development PLAY_ENV=true webpack-dev-server --config build/webpack.demo.js
启动组件的测试环境</li></ol> <blockquote><p>注意：play.js的main是src的别名，packages是packages的别名</p></blockquote> <h2 id="dist"><a href="#dist" class="header-anchor">#</a> dist</h2> <div class="language-js extra-class"><pre class="language-js"><code>npm run clean <span class="token operator">&amp;&amp;</span> npm run build<span class="token operator">:</span>file <span class="token operator">&amp;&amp;</span> npm run lint <span class="token operator">&amp;&amp;</span> webpack <span class="token operator">--</span>config build<span class="token operator">/</span>webpack<span class="token punctuation">.</span>conf<span class="token punctuation">.</span>js <span class="token operator">&amp;&amp;</span> webpack <span class="token operator">--</span>config build<span class="token operator">/</span>webpack<span class="token punctuation">.</span>common<span class="token punctuation">.</span>js <span class="token operator">&amp;&amp;</span> webpack <span class="token operator">--</span>config build<span class="token operator">/</span>webpack<span class="token punctuation">.</span>component<span class="token punctuation">.</span>js <span class="token operator">&amp;&amp;</span> npm run build<span class="token operator">:</span>utils <span class="token operator">&amp;&amp;</span> npm run build<span class="token operator">:</span>umd <span class="token operator">&amp;&amp;</span> npm run build<span class="token operator">:</span>theme
</code></pre></div><ol><li><p>webpack --config build/webpack.conf.js
打包umd版的elementui（非模块化）</p></li> <li><p>webpack --config build/webpack.common.js
打包common版的elementui（模块化）</p></li> <li><p>webpack --config build/webpack.component.js
打包组件common版的elementui。按需引入使用的，但要安装babel-plugin-component插件，这个插件会在打包的时候改变引用路径</p></li></ol></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/notes/pages/elementui/目录结构.html" class="prev">
        目录结构
      </a></span> <span class="next"><a href="/notes/pages/elementui/工具类说明.html">
        工具类说明
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/notes/assets/js/app.08cdebc2.js" defer></script><script src="/notes/assets/js/2.a5080860.js" defer></script><script src="/notes/assets/js/8.e6bb093c.js" defer></script>
  </body>
</html>
