## bootstrap
```js
"bootstrap": "yarn || npm i"
```
yarn命令存在则使用yarn安装依赖，否则使用npm i安装依赖

## build:file
```js
"build:file": "node build/bin/iconInit.js & node build/bin/build-entry.js & node build/bin/i18n.js & node build/bin/version.js"
```
这个命令里面的&是并行运行，[npm script中&&和&](https://juejin.cn/post/6844903664994222093)这篇文章很好的说明了&&和&的区别

1. node build/bin/iconInit.js
读取packages/theme-chalk/src/icon.scss，提取选择器名，保存到examples/icon.json

2. node build/bin/build-entry.js
读取components.json，获取所有组件的路径，根据默认的模板，生成src/index.js文件。

> 这里有几点值得学习的地方
> 1. 通过components.json获取到所有的组件，自动生成各个组件的导出，方便按需引入
> 2. 导出中有一个install方法，如果想要完整导入，只需要使用Vue.use(导出elementUi给的别名)

3. node build/bin/i18n.js
读取page.json，获取所有页面语言翻译，根据默认的模板，生成页面。

> 注意：国际化除了page.json，还有component.json，route.json，这些的执行脚本new-lang.js没有写到命令里，而是写在了makefile里面

4. node build/bin/version.js
生成版本文件

## build:theme
```js
"node build/bin/gen-cssfile && gulp build --gulpfile packages/theme-chalk/gulpfile.js && cp-cli packages/theme-chalk/lib lib/theme-chalk"
```

1. node build/bin/gen-cssfile
生成index.scss，引入所有的组件样式

2. gulp build --gulpfile packages/theme-chalk/gulpfile.js
把scss转成css并作一些处理，把fonts文件夹迁移到lib下

3. cp-cli packages/theme-chalk/lib lib/theme-chalk
迁移文件夹

## build:utils
```js
cross-env BABEL_ENV=utils babel src --out-dir lib --ignore src/index.js
```
因为系统之间的差异，使用corss-env来抹平。设置babel的环境变量为utils，通过babel把src下的文件根据utils的配置进行转换，输出到lib目录下，忽略src/index.js的转换

## build:umd
```js
node build/bin/build-locale.js
```
生成适合amd和cjs使用的国际化

## clean
删除文件

## deploy:build
```js
npm run build:file && cross-env NODE_ENV=production webpack --config build/webpack.demo.js && echo element.eleme.io>>examples/element-ui/CNAME
```
1. npm run build:file
这个看上面

2. cross-env NODE_ENV=production webpack --config build/webpack.demo.js
设置node环境变量，根据webpack.demo.js的配置，入口文件是examples/entry.js，最终输出到examples/element-ui。打包输出的是文档说明的生产环境

3. echo element.eleme.io>>examples/element-ui/CNAME
往examples/element-ui/CNAME输入element.eleme.io

## deploy:extension
```js
cross-env NODE_ENV=production webpack --config build/webpack.extension.js
```
用于构建名为Element Theme Roller的chrome生产环境的插件

## dev:extension
```js
rimraf examples/extension/dist && cross-env NODE_ENV=development webpack --watch --config build/webpack.extension.js
```

1. rimraf examples/extension/dist
删除打包的目录

2. cross-env NODE_ENV=development webpack --watch --config build/webpack.extension.js
用于构建名为Element Theme Roller的chrome测试环境的插件

## dev
```js
npm run bootstrap && npm run build:file && cross-env NODE_ENV=development webpack-dev-server --config build/webpack.demo.js & node build/bin/template.js
```
1. cross-env NODE_ENV=development webpack-dev-server --config build/webpack.demo.js
启动文档官网的测试环境

2. node build/bin/template.js
监听'examples/pages/template'下的模板文件

## dev:play
```js
npm run build:file && cross-env NODE_ENV=development PLAY_ENV=true webpack-dev-server --config build/webpack.demo.js
```
1. cross-env NODE_ENV=development PLAY_ENV=true webpack-dev-server --config build/webpack.demo.js
启动组件的测试环境
> 注意：play.js的main是src的别名，packages是packages的别名

## dist
```js
npm run clean && npm run build:file && npm run lint && webpack --config build/webpack.conf.js && webpack --config build/webpack.common.js && webpack --config build/webpack.component.js && npm run build:utils && npm run build:umd && npm run build:theme
```
1. webpack --config build/webpack.conf.js
打包umd版的elementui（非模块化）

2. webpack --config build/webpack.common.js
打包common版的elementui（模块化）

3. webpack --config build/webpack.component.js
打包组件common版的elementui。按需引入使用的，但要安装babel-plugin-component插件，这个插件会在打包的时候改变引用路径