(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{273:function(s,a,t){"use strict";t.r(a);var e=t(13),r=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"bootstrap"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#bootstrap"}},[s._v("#")]),s._v(" bootstrap")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v('"bootstrap"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"yarn || npm i"')]),s._v("\n")])])]),a("p",[s._v("yarn命令存在则使用yarn安装依赖，否则使用npm i安装依赖")]),s._v(" "),a("h2",{attrs:{id:"build-file"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#build-file"}},[s._v("#")]),s._v(" build:file")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v('"build:file"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"node build/bin/iconInit.js & node build/bin/build-entry.js & node build/bin/i18n.js & node build/bin/version.js"')]),s._v("\n")])])]),a("p",[s._v("这个命令里面的&是并行运行，"),a("a",{attrs:{href:"https://juejin.cn/post/6844903664994222093",target:"_blank",rel:"noopener noreferrer"}},[s._v("npm script中&&和&"),a("OutboundLink")],1),s._v("这篇文章很好的说明了&&和&的区别")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("node build/bin/iconInit.js\n读取packages/theme-chalk/src/icon.scss，提取选择器名，保存到examples/icon.json")])]),s._v(" "),a("li",[a("p",[s._v("node build/bin/build-entry.js\n读取components.json，获取所有组件的路径，根据默认的模板，生成src/index.js文件。")])])]),s._v(" "),a("blockquote",[a("p",[s._v("这里有几点值得学习的地方")]),s._v(" "),a("ol",[a("li",[s._v("通过components.json获取到所有的组件，自动生成各个组件的导出，方便按需引入")]),s._v(" "),a("li",[s._v("导出中有一个install方法，如果想要完整导入，只需要使用Vue.use(导出elementUi给的别名)")])])]),s._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[s._v("node build/bin/i18n.js\n读取page.json，获取所有页面语言翻译，根据默认的模板，生成页面。")])]),s._v(" "),a("blockquote",[a("p",[s._v("注意：国际化除了page.json，还有component.json，route.json，这些的执行脚本new-lang.js没有写到命令里，而是写在了makefile里面")])]),s._v(" "),a("ol",{attrs:{start:"4"}},[a("li",[s._v("node build/bin/version.js\n生成版本文件")])]),s._v(" "),a("h2",{attrs:{id:"build-theme"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#build-theme"}},[s._v("#")]),s._v(" build:theme")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"node build/bin/gen-cssfile && gulp build --gulpfile packages/theme-chalk/gulpfile.js && cp-cli packages/theme-chalk/lib lib/theme-chalk"')]),s._v("\n")])])]),a("ol",[a("li",[a("p",[s._v("node build/bin/gen-cssfile\n生成index.scss，引入所有的组件样式")])]),s._v(" "),a("li",[a("p",[s._v("gulp build --gulpfile packages/theme-chalk/gulpfile.js\n把scss转成css并作一些处理，把fonts文件夹迁移到lib下")])]),s._v(" "),a("li",[a("p",[s._v("cp-cli packages/theme-chalk/lib lib/theme-chalk\n迁移文件夹")])])]),s._v(" "),a("h2",{attrs:{id:"build-utils"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#build-utils"}},[s._v("#")]),s._v(" build:utils")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("cross"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("env "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("BABEL_ENV")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("utils babel src "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("out"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("dir lib "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("ignore src"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("index"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js\n")])])]),a("p",[s._v("因为系统之间的差异，使用corss-env来抹平。设置babel的环境变量为utils，通过babel把src下的文件根据utils的配置进行转换，输出到lib目录下，忽略src/index.js的转换")]),s._v(" "),a("h2",{attrs:{id:"build-umd"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#build-umd"}},[s._v("#")]),s._v(" build:umd")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("node build"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("build"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("locale"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js\n")])])]),a("p",[s._v("生成适合amd和cjs使用的国际化")]),s._v(" "),a("h2",{attrs:{id:"clean"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#clean"}},[s._v("#")]),s._v(" clean")]),s._v(" "),a("p",[s._v("删除文件")]),s._v(" "),a("h2",{attrs:{id:"deploy-build"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#deploy-build"}},[s._v("#")]),s._v(" deploy:build")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("npm run build"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("file "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" cross"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("env "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("NODE_ENV")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("production webpack "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("config build"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("webpack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("demo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" echo element"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("eleme"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("io"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v("examples"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("element"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("ui"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("CNAME")]),s._v("\n")])])]),a("ol",[a("li",[a("p",[s._v("npm run build:file\n这个看上面")])]),s._v(" "),a("li",[a("p",[s._v("cross-env NODE_ENV=production webpack --config build/webpack.demo.js\n设置node环境变量，根据webpack.demo.js的配置，入口文件是examples/entry.js，最终输出到examples/element-ui。打包输出的是文档说明的生产环境")])]),s._v(" "),a("li",[a("p",[s._v("echo element.eleme.io>>examples/element-ui/CNAME\n往examples/element-ui/CNAME输入element.eleme.io")])])]),s._v(" "),a("h2",{attrs:{id:"deploy-extension"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#deploy-extension"}},[s._v("#")]),s._v(" deploy:extension")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("cross"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("env "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("NODE_ENV")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("production webpack "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("config build"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("webpack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("extension"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js\n")])])]),a("p",[s._v("用于构建名为Element Theme Roller的chrome生产环境的插件")]),s._v(" "),a("h2",{attrs:{id:"dev-extension"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dev-extension"}},[s._v("#")]),s._v(" dev:extension")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("rimraf examples"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("extension"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("dist "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" cross"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("env "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("NODE_ENV")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("development webpack "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("watch "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("config build"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("webpack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("extension"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js\n")])])]),a("ol",[a("li",[a("p",[s._v("rimraf examples/extension/dist\n删除打包的目录")])]),s._v(" "),a("li",[a("p",[s._v("cross-env NODE_ENV=development webpack --watch --config build/webpack.extension.js\n用于构建名为Element Theme Roller的chrome测试环境的插件")])])]),s._v(" "),a("h2",{attrs:{id:"dev"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dev"}},[s._v("#")]),s._v(" dev")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("npm run bootstrap "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" npm run build"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("file "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" cross"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("env "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("NODE_ENV")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("development webpack"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("dev"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("server "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("config build"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("webpack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("demo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v(" node build"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("template"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js\n")])])]),a("ol",[a("li",[a("p",[s._v("cross-env NODE_ENV=development webpack-dev-server --config build/webpack.demo.js\n启动文档官网的测试环境")])]),s._v(" "),a("li",[a("p",[s._v("node build/bin/template.js\n监听'examples/pages/template'下的模板文件")])])]),s._v(" "),a("h2",{attrs:{id:"dev-play"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dev-play"}},[s._v("#")]),s._v(" dev:play")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("npm run build"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("file "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" cross"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("env "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("NODE_ENV")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("development "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("PLAY_ENV")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v(" webpack"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("dev"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("server "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("config build"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("webpack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("demo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js\n")])])]),a("ol",[a("li",[s._v("cross-env NODE_ENV=development PLAY_ENV=true webpack-dev-server --config build/webpack.demo.js\n启动组件的测试环境")])]),s._v(" "),a("blockquote",[a("p",[s._v("注意：play.js的main是src的别名，packages是packages的别名")])]),s._v(" "),a("h2",{attrs:{id:"dist"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dist"}},[s._v("#")]),s._v(" dist")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("npm run clean "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" npm run build"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("file "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" npm run lint "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" webpack "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("config build"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("webpack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("conf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" webpack "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("config build"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("webpack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("common"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" webpack "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("config build"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("webpack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("component"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" npm run build"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("utils "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" npm run build"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("umd "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" npm run build"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("theme\n")])])]),a("ol",[a("li",[a("p",[s._v("webpack --config build/webpack.conf.js\n打包umd版的elementui（非模块化）")])]),s._v(" "),a("li",[a("p",[s._v("webpack --config build/webpack.common.js\n打包common版的elementui（模块化）")])]),s._v(" "),a("li",[a("p",[s._v("webpack --config build/webpack.component.js\n打包组件common版的elementui。按需引入使用的，但要安装babel-plugin-component插件，这个插件会在打包的时候改变引用路径")])])])])}),[],!1,null,null,null);a.default=r.exports}}]);